<script>
	import { sendStreamToServer, sendUrlToServer, sendFileToServer } from "../serverfunctions"
	
	const readable = new ReadableStream({
		start(controller) {
			controller.enqueue("Hello")
			controller.enqueue("from")
			controller.enqueue("a")
			controller.enqueue("readable")
			controller.enqueue("stream.")
			controller.close()
		}
	})
	
	console.log(await sendStreamToServer(readable))

	console.log(await sendUrlToServer(new URL("https://example.com")))

	document.querySelector("input").addEventListener("change", async (event) => {
		const file = event.target.files[0]
		console.log(await sendFileToServer({
			name: file.name,
			type: file.type,
			size: file.size,
			lastModified: file.lastModified,
			stream: file.stream()
		}))
	})
</script>
<input type="file"></input>
